{"version":3,"file":"AwsLambdaDetectorSync.js","sourceRoot":"","sources":["../../../src/detectors/AwsLambdaDetectorSync.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;GAcG;AAEH,OAAO,EAGL,QAAQ,GAGT,MAAM,0BAA0B,CAAC;AAClC,OAAO,EACL,mBAAmB,EACnB,mBAAmB,EACnB,iBAAiB,EACjB,iBAAiB,EACjB,cAAc,EACd,wBAAwB,EACxB,+BAA+B,GAChC,MAAM,YAAY,CAAC;AAEpB;;;;GAIG;AACH;IAAA;IA2BA,CAAC;IA1BC,sCAAM,GAAN,UAAO,OAAiC;;QACtC,IAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;QAC1D,IAAI,CAAC,YAAY,EAAE;YACjB,OAAO,QAAQ,CAAC,KAAK,EAAE,CAAC;SACzB;QAED,IAAM,eAAe,GAAG,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC;QAChE,IAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;QAEtC,IAAM,UAAU;YACd,GAAC,mBAAmB,IAAG,MAAM,CAAC,wBAAwB,CAAC;YACvD,GAAC,mBAAmB,IAAG,MAAM,CAAC,+BAA+B,CAAC;eAC/D,CAAC;QACF,IAAI,MAAM,EAAE;YACV,UAAU,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC;SACxC;QAED,IAAI,YAAY,EAAE;YAChB,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;SAC3C;QACD,IAAI,eAAe,EAAE;YACnB,UAAU,CAAC,iBAAiB,CAAC,GAAG,eAAe,CAAC;SACjD;QAED,OAAO,IAAI,QAAQ,CAAC,UAAU,CAAC,CAAC;IAClC,CAAC;IACH,4BAAC;AAAD,CAAC,AA3BD,IA2BC;;AAED,MAAM,CAAC,IAAM,qBAAqB,GAAG,IAAI,qBAAqB,EAAE,CAAC","sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DetectorSync,\n  IResource,\n  Resource,\n  ResourceAttributes,\n  ResourceDetectionConfig,\n} from '@opentelemetry/resources';\nimport {\n  ATTR_CLOUD_PROVIDER,\n  ATTR_CLOUD_PLATFORM,\n  ATTR_CLOUD_REGION,\n  ATTR_FAAS_VERSION,\n  ATTR_FAAS_NAME,\n  CLOUD_PROVIDER_VALUE_AWS,\n  CLOUD_PLATFORM_VALUE_AWS_LAMBDA,\n} from '../semconv';\n\n/**\n * The AwsLambdaDetector can be used to detect if a process is running in AWS Lambda\n * and return a {@link Resource} populated with data about the environment.\n * Returns an empty Resource if detection fails.\n */\nexport class AwsLambdaDetectorSync implements DetectorSync {\n  detect(_config?: ResourceDetectionConfig): IResource {\n    const functionName = process.env.AWS_LAMBDA_FUNCTION_NAME;\n    if (!functionName) {\n      return Resource.empty();\n    }\n\n    const functionVersion = process.env.AWS_LAMBDA_FUNCTION_VERSION;\n    const region = process.env.AWS_REGION;\n\n    const attributes: ResourceAttributes = {\n      [ATTR_CLOUD_PROVIDER]: String(CLOUD_PROVIDER_VALUE_AWS),\n      [ATTR_CLOUD_PLATFORM]: String(CLOUD_PLATFORM_VALUE_AWS_LAMBDA),\n    };\n    if (region) {\n      attributes[ATTR_CLOUD_REGION] = region;\n    }\n\n    if (functionName) {\n      attributes[ATTR_FAAS_NAME] = functionName;\n    }\n    if (functionVersion) {\n      attributes[ATTR_FAAS_VERSION] = functionVersion;\n    }\n\n    return new Resource(attributes);\n  }\n}\n\nexport const awsLambdaDetectorSync = new AwsLambdaDetectorSync();\n"]}